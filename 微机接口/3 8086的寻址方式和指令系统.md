# 8086的寻址方式和指令系统
> 重点 寻址方式，执行流程和结果，求物理地址，错误指令判断，实现功能

- 指令，通常包含操作码（Opcode）和操作数（Operand）
    - 操作码指出操作的性质
    - 操作数给出操作的对象
- 寻址方式：指令中说明操作数所在地址的方法
- 指令有单操作数、双操作数和无操作数
    - 双操作数，要用逗号分开，左边的为++源操作数++，右边的为++目的操作数++


- 立即数寻址：可直接从指令队列中取数，指令执行速度较快
- 寄存器寻址：操作数在寄存器中，执行速度最快
- 存储器寻址：操作数在存储器中，又分几种形式，执行速度较慢
- 其它寻址：如隐含寻址、I/O端口寻址、转移类指令寻址


- 涉及操作数的地址时，常使用方括号，带[ ]的地址必须遵循下列规则：
    1. 立即数可以出现在方括号内，表示直接地址，例如［2000H］
    2. 只有BX、BP、SI、DI可以出现在［］内，既可单独出现，也可几个寄存器相加，或寄存器与常数相加，但BX和BP不允许同时出现，SI和DI也不能同时出现
    3. 方括号有相加的含义


## 3.1 8086的寻址方式

#### 立即数寻址方式
> 操作数直接包含在指令中，是一个8位或16位的常数，也叫立即数

- 立即数可以送到寄存器中，还可送到一个存储单元(8位)中或两个连续的存储单元(16位)中
- 立即数只能作源操作数，不能作目的操作数
- 以A~F打头的16进制数字出现在指令中时，前面要加数字0

```
MOV AL, 26H
MOV CX, 2A50H
MOV AX, 0FF00H
```


#### 寄存器寻址方式
> 操作数包含在寄存器中，由指令指定寄存器的名称

- 16位寄存器：AX、BX、CX、DX、SI、DI、SP、BP
- 8位寄存器：AH、AL、BH、BL、CH、CL、DH、DL


- 源操作数的长度必须与目的操作数一致，否则会出错

```
MOV DX, AX
MOV CL, AH
```


#### 直接寻址方式
> 操作数的偏移地址也称为有效地址EA（Effective Address）  
> 在直接寻址方式下，存储单元的有效地址直接由指令给出  
> 默认使用数据段寄存器DS，操作数的物理地址 = 16×DS+EA

- 加[ ]，表示不是立即数
- 根据目的操作数大小决定源操作数大小
- 如果要对代码段、堆栈段或附加段寄存器所指出的存储区进行直接寻址，应在指令中指定段超越前缀
- 允许用符号地址代替数值地址，需事先用伪指令进行说明

```
MOV AX, [2000H]
MOV AL, [2000H]
MOV AX, ES:[500H]
AREA1 DW 0876H
MOV AX, AREA1
```


#### 寄存器间接寻址方式
> 指令中给出的寄存器中的值不是操作数本身，而是操作数的有效地址EA

- 寄存器名称外加方括号，可用寄存器：BX、BP、SI、DI
- 用BX、SI、DI时，默认操作数存放在数据段中
    - 物理地址 = 16 × DS + BX/SI/DI
- 用BP时，默认操作数在堆栈段中
    - 物理地址 = 16 × SS + BP
- 可以指定段超越前缀

```
MOV BX, [SI]
MOV AX, [BP]
MOV BX, DS:[BP]
```


#### 寄存器相对寻址方式
> 与寄存器间接寻址十分相似，但在有效地址上加一个8/16位的位移量

```
MOV BX, COUNT[SI]
MOV BX, [COUNT+SI]
MOV BX, ES:COUNT[SI]
```

#### 基址变址寻址方式
> 有效地址是一个基址寄存器(BX或BP)和一个变址寄存器(SI或DI)的内容之和，两个寄存器均由指令指定

- 基址寄存器为BX时，段址寄存器用DS
- 基址寄存器为BP时，段址寄存器用SS

```
MOV AX, [BX][SI]
MOV AX, [BX+SI]
```

#### 相对基址变址寻址方式
> 有效地址是基址和变址寄存器的内容，再加上8/16位位移量之和

- 基址寄存器为BX时，段址寄存器用DS
- 基址寄存器为BP时，段址寄存器用SS

```
MOV AX, MASK[BX][SI]
MOV AX, [MASK+BX+SI]
MOV AX, MASK[BX+SI]
```


#### 其它寻址方式
##### 隐含寻址
> 指令中不指明操作数，但具有隐含规定的寻址方式
```
DAA  	;对AL中的数据进行十进制调整，结果仍保留在AL中
```

##### I/O端口寻址
- 直接端口寻址方式：端口地址由指令直接提供，一个8位立即数
```
IN AL, 63H      ;AL←端口63H中的内容
```
- 间接端口寻址方式：被寻址的端口号由寄存器DX提供
```
IN AL, DX
```

##### 转移类指令寻址
- 略



## 3.2 指令的机器码表示方法（*）
> 了解特点，概念

- 略



## 3.3 8086的指令系统
- 8086的指令共有六大类：
    - 数据传送指令
    - 算术运算指令
    - 逻辑运算和移位指令
    - 字符串处理指令
    - 控制转移指令
    - 处理器控制指令

### 数据传送指令
> 除SAHF和POPF 指令外，对标志位均没有影响


### 算术运算指令

### 逻辑运算和移位指令
### 字符串处理指令

### 控制转移指令

### 处理器控制指令